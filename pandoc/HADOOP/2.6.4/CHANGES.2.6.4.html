<!---
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
-->
<h1 id="apache-hadoop-changelog">Apache Hadoop Changelog</h1>
<h2 id="release-2.6.4---2016-02-11">Release 2.6.4 - 2016-02-11</h2>
<h3 id="incompatible-changes">INCOMPATIBLE CHANGES:</h3>
<table style="width:49%;">
<colgroup>
<col width="8%" />
<col width="8%" />
<col width="6%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">JIRA</th>
<th align="left">Summary</th>
<th align="left">Priority</th>
<th align="left">Component</th>
<th align="left">Reporter</th>
<th align="left">Contributor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-3154">YARN-3154</a></td>
<td align="left">Should not upload partial logs for MR jobs or other &quot;short-running' applications</td>
<td align="left">Blocker</td>
<td align="left">nodemanager, resourcemanager</td>
<td align="left">Xuan Gong</td>
<td align="left">Xuan Gong</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/HADOOP-11252">HADOOP-11252</a></td>
<td align="left">RPC client does not time out by default</td>
<td align="left">Critical</td>
<td align="left">ipc</td>
<td align="left">Wilfred Spiegelenburg</td>
<td align="left">Masatake Iwasaki</td>
</tr>
</tbody>
</table>
<h3 id="improvements">IMPROVEMENTS:</h3>
<table style="width:49%;">
<colgroup>
<col width="8%" />
<col width="8%" />
<col width="6%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">JIRA</th>
<th align="left">Summary</th>
<th align="left">Priority</th>
<th align="left">Component</th>
<th align="left">Reporter</th>
<th align="left">Contributor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-7694">HDFS-7694</a></td>
<td align="left">FSDataInputStream should support &quot;unbuffer&quot;</td>
<td align="left">Major</td>
<td align="left">.</td>
<td align="left">Colin P. McCabe</td>
<td align="left">Colin P. McCabe</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-8722">HDFS-8722</a></td>
<td align="left">Optimize datanode writes for small writes and flushes</td>
<td align="left">Critical</td>
<td align="left">.</td>
<td align="left">Kihwal Lee</td>
<td align="left">Kihwal Lee</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-8647">HDFS-8647</a></td>
<td align="left">Abstract BlockManager's rack policy into BlockPlacementPolicy</td>
<td align="left">Major</td>
<td align="left">.</td>
<td align="left">Ming Ma</td>
<td align="left">Brahma Reddy Battula</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-9314">HDFS-9314</a></td>
<td align="left">Improve BlockPlacementPolicyDefault's picking of excess replicas</td>
<td align="left">Major</td>
<td align="left">.</td>
<td align="left">Ming Ma</td>
<td align="left">Xiao Chen</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/MAPREDUCE-6436">MAPREDUCE-6436</a></td>
<td align="left">JobHistory cache issue</td>
<td align="left">Blocker</td>
<td align="left">.</td>
<td align="left">Ryu Kobayashi</td>
<td align="left">Kai Sasaki</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-9415">HDFS-9415</a></td>
<td align="left">Document dfs.cluster.administrators and dfs.permissions.superusergroup</td>
<td align="left">Major</td>
<td align="left">documentation</td>
<td align="left">Arpit Agarwal</td>
<td align="left">Xiaobing Zhou</td>
</tr>
</tbody>
</table>
<h3 id="bug-fixes">BUG FIXES:</h3>
<table style="width:49%;">
<colgroup>
<col width="8%" />
<col width="8%" />
<col width="6%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">JIRA</th>
<th align="left">Summary</th>
<th align="left">Priority</th>
<th align="left">Component</th>
<th align="left">Reporter</th>
<th align="left">Contributor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-2975">YARN-2975</a></td>
<td align="left">FSLeafQueue app lists are accessed without required locks</td>
<td align="left">Blocker</td>
<td align="left">.</td>
<td align="left">Karthik Kambatla</td>
<td align="left">Karthik Kambatla</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-6945">HDFS-6945</a></td>
<td align="left">BlockManager should remove a block from excessReplicateMap and decrement ExcessBlocks metric when the block is removed</td>
<td align="left">Critical</td>
<td align="left">namenode</td>
<td align="left">Akira Ajisaka</td>
<td align="left">Akira Ajisaka</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-4660">HDFS-4660</a></td>
<td align="left">Block corruption can happen during pipeline recovery</td>
<td align="left">Blocker</td>
<td align="left">datanode</td>
<td align="left">Peng Zhang</td>
<td align="left">Kihwal Lee</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-3842">YARN-3842</a></td>
<td align="left">NMProxy should retry on NMNotYetReadyException</td>
<td align="left">Critical</td>
<td align="left">.</td>
<td align="left">Karthik Kambatla</td>
<td align="left">Robert Kanter</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-3695">YARN-3695</a></td>
<td align="left">ServerProxy (NMProxy, etc.) shouldn't retry forever for non network exception.</td>
<td align="left">Major</td>
<td align="left">.</td>
<td align="left">Junping Du</td>
<td align="left">Raju Bairishetti</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/HADOOP-12107">HADOOP-12107</a></td>
<td align="left">long running apps may have a huge number of StatisticsData instances under FileSystem</td>
<td align="left">Critical</td>
<td align="left">fs</td>
<td align="left">Sangjin Lee</td>
<td align="left">Sangjin Lee</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-3849">YARN-3849</a></td>
<td align="left">Too much of preemption activity causing continuos killing of containers across queues</td>
<td align="left">Critical</td>
<td align="left">capacityscheduler</td>
<td align="left">Sunil G</td>
<td align="left">Sunil G</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-8767">HDFS-8767</a></td>
<td align="left">RawLocalFileSystem.listStatus() returns null for UNIX pipefile</td>
<td align="left">Critical</td>
<td align="left">.</td>
<td align="left">Haohui Mai</td>
<td align="left">Kanaka Kumar Avvaru</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-3535">YARN-3535</a></td>
<td align="left">Scheduler must re-request container resources when RMContainer transitions from ALLOCATED to KILLED</td>
<td align="left">Critical</td>
<td align="left">capacityscheduler, fairscheduler, resourcemanager</td>
<td align="left">Peng Zhang</td>
<td align="left">Peng Zhang</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-3857">YARN-3857</a></td>
<td align="left">Memory leak in ResourceManager with SIMPLE mode</td>
<td align="left">Critical</td>
<td align="left">resourcemanager</td>
<td align="left">mujunchao</td>
<td align="left">mujunchao</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/MAPREDUCE-5982">MAPREDUCE-5982</a></td>
<td align="left">Task attempts that fail from the ASSIGNED state can disappear</td>
<td align="left">Major</td>
<td align="left">mr-am</td>
<td align="left">Jason Lowe</td>
<td align="left">Chang Li</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-3697">YARN-3697</a></td>
<td align="left">FairScheduler: ContinuousSchedulingThread can fail to shutdown</td>
<td align="left">Critical</td>
<td align="left">fairscheduler</td>
<td align="left">zhihai xu</td>
<td align="left">zhihai xu</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/MAPREDUCE-6492">MAPREDUCE-6492</a></td>
<td align="left">AsyncDispatcher exit with NPE on TaskAttemptImpl#sendJHStartEventForAssignedFailTask</td>
<td align="left">Critical</td>
<td align="left">.</td>
<td align="left">Bibin A Chundatt</td>
<td align="left">Bibin A Chundatt</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-4180">YARN-4180</a></td>
<td align="left">AMLauncher does not retry on failures when talking to NM</td>
<td align="left">Critical</td>
<td align="left">resourcemanager</td>
<td align="left">Anubhav Dhoot</td>
<td align="left">Anubhav Dhoot</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-9178">HDFS-9178</a></td>
<td align="left">Slow datanode I/O can cause a wrong node to be marked bad</td>
<td align="left">Critical</td>
<td align="left">.</td>
<td align="left">Kihwal Lee</td>
<td align="left">Kihwal Lee</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-9220">HDFS-9220</a></td>
<td align="left">Reading small file (&lt; 512 bytes) that is open for append fails due to incorrect checksum</td>
<td align="left">Blocker</td>
<td align="left">.</td>
<td align="left">Bogdan Raducanu</td>
<td align="left">Jing Zhao</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-9313">HDFS-9313</a></td>
<td align="left">Possible NullPointerException in BlockManager if no excess replica can be chosen</td>
<td align="left">Major</td>
<td align="left">.</td>
<td align="left">Ming Ma</td>
<td align="left">Ming Ma</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-4354">YARN-4354</a></td>
<td align="left">Public resource localization fails with NPE</td>
<td align="left">Blocker</td>
<td align="left">nodemanager</td>
<td align="left">Jason Lowe</td>
<td align="left">Jason Lowe</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-4380">YARN-4380</a></td>
<td align="left">TestResourceLocalizationService.testDownloadingResourcesOnContainerKill fails intermittently</td>
<td align="left">Major</td>
<td align="left">test</td>
<td align="left">Tsuyoshi Ozawa</td>
<td align="left">Varun Saxena</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-9294">HDFS-9294</a></td>
<td align="left">DFSClient deadlock when close file and failed to renew lease</td>
<td align="left">Blocker</td>
<td align="left">hdfs-client</td>
<td align="left">DENG FEI</td>
<td align="left">Brahma Reddy Battula</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-4452">YARN-4452</a></td>
<td align="left">NPE when submit Unmanaged application</td>
<td align="left">Critical</td>
<td align="left">.</td>
<td align="left">Naganarasimha G R</td>
<td align="left">Naganarasimha G R</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-9445">HDFS-9445</a></td>
<td align="left">Datanode may deadlock while handling a bad volume</td>
<td align="left">Blocker</td>
<td align="left">.</td>
<td align="left">Kihwal Lee</td>
<td align="left">Walter Su</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/MAPREDUCE-6577">MAPREDUCE-6577</a></td>
<td align="left">MR AM unable to load native library without MR_AM_ADMIN_USER_ENV set</td>
<td align="left">Critical</td>
<td align="left">mr-am</td>
<td align="left">Sangjin Lee</td>
<td align="left">Sangjin Lee</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-4546">YARN-4546</a></td>
<td align="left">ResourceManager crash due to scheduling opportunity overflow</td>
<td align="left">Critical</td>
<td align="left">resourcemanager</td>
<td align="left">Jason Lowe</td>
<td align="left">Jason Lowe</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-9600">HDFS-9600</a></td>
<td align="left">do not check replication if the block is under construction</td>
<td align="left">Critical</td>
<td align="left">.</td>
<td align="left">Phil Yang</td>
<td align="left">Phil Yang</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/HDFS-9574">HDFS-9574</a></td>
<td align="left">Reduce client failures during datanode restart</td>
<td align="left">Major</td>
<td align="left">.</td>
<td align="left">Kihwal Lee</td>
<td align="left">Kihwal Lee</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-4414">YARN-4414</a></td>
<td align="left">Nodemanager connection errors are retried at multiple levels</td>
<td align="left">Major</td>
<td align="left">nodemanager</td>
<td align="left">Jason Lowe</td>
<td align="left">Chang Li</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/HADOOP-12706">HADOOP-12706</a></td>
<td align="left">TestLocalFsFCStatistics#testStatisticsThreadLocalDataCleanUp times out occasionally</td>
<td align="left">Major</td>
<td align="left">test</td>
<td align="left">Jason Lowe</td>
<td align="left">Sangjin Lee</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-4581">YARN-4581</a></td>
<td align="left">AHS writer thread leak makes RM crash while RM is recovering</td>
<td align="left">Major</td>
<td align="left">resourcemanager</td>
<td align="left">sandflee</td>
<td align="left">sandflee</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/MAPREDUCE-6554">MAPREDUCE-6554</a></td>
<td align="left">MRAppMaster servicestart failing with NPE in MRAppMaster#parsePreviousJobHistory</td>
<td align="left">Critical</td>
<td align="left">.</td>
<td align="left">Bibin A Chundatt</td>
<td align="left">Bibin A Chundatt</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-4598">YARN-4598</a></td>
<td align="left">Invalid event: RESOURCE_FAILED at CONTAINER_CLEANEDUP_AFTER_KILL</td>
<td align="left">Major</td>
<td align="left">nodemanager</td>
<td align="left">tangshangwen</td>
<td align="left">tangshangwen</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/MAPREDUCE-6619">MAPREDUCE-6619</a></td>
<td align="left">HADOOP_CLASSPATH is overwritten in MR container</td>
<td align="left">Major</td>
<td align="left">mrv2</td>
<td align="left">shanyu zhao</td>
<td align="left">Junping Du</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/MAPREDUCE-6618">MAPREDUCE-6618</a></td>
<td align="left">YarnClientProtocolProvider leaking the YarnClient thread.</td>
<td align="left">Major</td>
<td align="left">.</td>
<td align="left">Xuan Gong</td>
<td align="left">Xuan Gong</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/MAPREDUCE-6621">MAPREDUCE-6621</a></td>
<td align="left">Memory Leak in JobClient#submitJobInternal()</td>
<td align="left">Major</td>
<td align="left">.</td>
<td align="left">Xuan Gong</td>
<td align="left">Xuan Gong</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/MAPREDUCE-6363">MAPREDUCE-6363</a></td>
<td align="left">[NNBench] Lease mismatch error when running with multiple mappers</td>
<td align="left">Critical</td>
<td align="left">benchmarks</td>
<td align="left">Brahma Reddy Battula</td>
<td align="left">Bibin A Chundatt</td>
</tr>
</tbody>
</table>
<h3 id="tests">TESTS:</h3>
<table style="width:49%;">
<colgroup>
<col width="8%" />
<col width="8%" />
<col width="6%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">JIRA</th>
<th align="left">Summary</th>
<th align="left">Priority</th>
<th align="left">Component</th>
<th align="left">Reporter</th>
<th align="left">Contributor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/HADOOP-12736">HADOOP-12736</a></td>
<td align="left">TestTimedOutTestsListener#testThreadDumpAndDeadlocks sometimes times out</td>
<td align="left">Major</td>
<td align="left">.</td>
<td align="left">Xiao Chen</td>
<td align="left">Xiao Chen</td>
</tr>
</tbody>
</table>
<h3 id="sub-tasks">SUB-TASKS:</h3>
<table style="width:49%;">
<colgroup>
<col width="8%" />
<col width="8%" />
<col width="6%" />
<col width="8%" />
<col width="8%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">JIRA</th>
<th align="left">Summary</th>
<th align="left">Priority</th>
<th align="left">Component</th>
<th align="left">Reporter</th>
<th align="left">Contributor</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-3893">YARN-3893</a></td>
<td align="left">Both RM in active state when Admin#transitionToActive failure from refeshAll()</td>
<td align="left">Critical</td>
<td align="left">resourcemanager</td>
<td align="left">Bibin A Chundatt</td>
<td align="left">Bibin A Chundatt</td>
</tr>
<tr class="even">
<td align="left"><a href="https://issues.apache.org/jira/browse/YARN-2902">YARN-2902</a></td>
<td align="left">Killing a container that is localizing can orphan resources in the DOWNLOADING state</td>
<td align="left">Major</td>
<td align="left">nodemanager</td>
<td align="left">Jason Lowe</td>
<td align="left">Varun Saxena</td>
</tr>
</tbody>
</table>
